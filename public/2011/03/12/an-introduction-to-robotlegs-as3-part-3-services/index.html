<!DOCTYPE html>
<!--[if lt IE 7 ]><html dir="ltr" lang="en-US" class="no-js ie ie6 lte7 lte8 lte9"><![endif]-->
<!--[if IE 7 ]><html dir="ltr" lang="en-US" class="no-js ie ie7 lte7 lte8 lte9"><![endif]-->
<!--[if IE 8 ]><html dir="ltr" lang="en-US" class="no-js ie ie8 lte8 lte9"><![endif]-->
<!--[if IE 9 ]><html dir="ltr" lang="en-US" class="no-js ie ie9 lte9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html dir="ltr" lang="en-US" class="no-js"><!--<![endif]-->
	<head>
<base href="https://joelhooks.com" />

		<meta charset="UTF-8" />
                <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<title>An Introduction to Robotlegs AS3 Part 3: Servicesjoelhooks.com | joelhooks.com</title>
		
		<link rel="stylesheet" href="https://joelhooks.com/wp-content/themes/boilerplate/style.css" />
		



<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js" onload="window.ieshiv=true;"></script>
	<script>!window.ieshiv && document.write(unescape('%3Cscript src="https://joelhooks.com/wp-content/themes/boilerplate/js/ieshiv.js"%3E%3C/script%3E'))</script>
<![endif]-->
<link rel='stylesheet' id='codebox-css'  href='https://joelhooks.com/wp-content/plugins/wp-codebox/css/codebox.css?ver=0.1' type='text/css' media='screen' />
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js?ver=2.2'></script>
<script type='text/javascript' src='https://joelhooks.com/wp-includes/js/jquery/jquery.js?ver=1.7.1'></script>
<script type='text/javascript' src='https://joelhooks.com/wp-content/plugins/wp-codebox/js/codebox.js?ver=0.1'></script>

<script type="text/javascript" charset="utf-8">

	/**
	 * Courtesy of Kimili Flash Embed - Version 2.2
	 * by Michael Bester - https://kimili.com
	 */

	(function(){
		try {
			// Disabling SWFObject's Autohide feature
			if (typeof swfobject.switchOffAutoHideShow === "function") {
				swfobject.switchOffAutoHideShow();
			}
		} catch(e) {}
	})();
</script>

 

<link rel='next' title='Robotlegs Book: ActionScript Developerâ€™s Guide to Robotlegs' href='https://joelhooks.com/2011/07/16/robotlegs-book-actionscript-developer%e2%80%99s-guide-to-robotlegs/' />

<link rel='shortlink' href='https://joelhooks.com/?p=600' />

<!-- All in One SEO Pack 1.6.13.8 by Michael Torbert of Semper Fi Web Design[635,707] -->
<link rel="canonical" href="https://joelhooks.com/2011/03/12/an-introduction-to-robotlegs-as3-part-3-services/" />
<!-- /all in one seo pack -->

<!-- Creative Commons License added by Creative-Commons-Configurator plugin - Get it at: https://www.g-loaded.eu/ -->
<link rel="license" type="text/html" href="https://creativecommons.org/licenses/by/3.0/us/" />

<style type="text/css"><!--
.cc-block { width: 90%; margin: 8px auto; padding: 4px; text-align: center; border: 1px solid #cccccc; color: #000000; background-color: #eef6e6; }
--></style>

<!-- BEGIN: WP Social Bookmarking Light -->
<style type="text/css">
div.wp_social_bookmarking_light{border:0 !important;padding:0px 0 0px 0 !important;margin:0 !important;}
div.wp_social_bookmarking_light div{float:left !important;border:0 !important;padding:0 4px 0px 0 !important;margin:0 !important;height:21px !important;text-indent:0 !important;}
div.wp_social_bookmarking_light img{border:0 !important;padding:0;margin:0;vertical-align:top !important;}
.wp_social_bookmarking_light_clear{clear:both !important;}
</style>
<!-- END: WP Social Bookmarking Light -->
	</head>
	<body class="single single-post postid-600 single-format-standard">
		<header role="banner">
			<h1><a href="https://joelhooks.com/" title="joelhooks.com" rel="home">joelhooks.com</a></h1>
			<p>[without tests] you aren't refactoring, you're just changing shit. - Hamlet Darcy</p>

		</header>
<style type="text/css">
.buybox{margin-top:30px;margin-bottom:15px;padding:10px;background:rgba(247,242,228,0.55);border:1px solid #e6e6e6;display:block;margin-left:auto;margin-right:auto;width:80%;text-align:center}.buybox .button:hover{text-decoration:none !important;background:#3282cc}.buybox .button{display:inline-block;width:232px;text-decoration:none;background:#3488d6;background:#3488d6;color:white;padding:15px;border:1px solid #333;text-align:center;cursor:pointer;border-radius:3px;box-shadow:0px 1px 2px #999}@media screen and (max-width: 450px){.buybox .button{width:80%;font-size:12px;font-weight:bold}}.buybox .buyhead{font-weight:bold;font-size:26px;font-family:"freight-sans-pro",sans-serif}.buybox .small{font-size:10px}.buybox .text{text-align:left}.buybox .small{font-size:10px}.buybox .quote{text-align:center;padding:15px;color:#666} .buybox.head {text-align: center}
</style>

<div class="buybox">
  <span class="buyhead">Making the Switch from Flash/Flex to HTML5/JS?</span><br>
  <p class="head"><img src="https://joelhooks.com/images/head.png?1366317208"></p>
  <p class="text">You can join my newsletter and get informative articles delivered right to your inbox.</p>
  <a class="button" href="https://eepurl.com/AtKxv">Let's start learning!</a>
  <p class="small">I will never spam you. Unsubscribe at anytime.</p>
  
</div>

		<section id="content" role="main">				<article id="post-600" class="post-600 post type-post status-publish format-standard hentry category-actionscript category-flex category-robotlegs">
					<h1>An Introduction to Robotlegs AS3 Part 3: Services</h1>
		
					<div class="entry-content">
						<p>This is the third part in the introductory series covering Robotlegs AS3 here on InsideRIA. In the first part in the series we learned what <a onclick="javascript:pageTracker._trackPageview('/outgoing/www.robotlegs.org');"  href="https://www.robotlegs.org">Robotlegs AS3</a> is and had a brief <a href="https://joelhooks.com/2011/03/12/an-introduction-to-robotlegs-as3-part-1-context-and-mediators/">&#8220;HelloWorld&#8221; introduction to the Robotlegs Context and Mediator</a> classes. In the <a href="https://joelhooks.com/2011/03/12/an-introduction-to-robotlegs-as3-part-2-models/">second part</a> we explored Models. This article is going to expand on those concepts and introduce Services.</p>
<p><span class="mt-enclosure mt-enclosure-image" style="display: inline;"><img alt="robotlegs.jpg" src="https://www.developria.com/2010/06/03/robotlegs.jpg" width="157" height="164" class="mt-image-right" style="float: right; margin: 0 0 20px 20px;" /></span> </p>
<p>If you missed the first two parts I recommend looking at them first:</p>
<ul>
<li>
      <a href="https://joelhooks.com/2011/03/12/an-introduction-to-robotlegs-as3-part-1-context-and-mediators/">Part One: Context and Mediators</a>
    </li>
<li>
      <a href="https://joelhooks.com/2011/03/12/an-introduction-to-robotlegs-as3-part-2-models/">Part Two: Models</a>
    </li>
</ul>
<h2>What is a Service?</h2>
<p>The name of this website is InsideRIA. A Service is your application&#8217;s link to the I in RIA. Services provide your application an API to access web services, data sources, and other applications. This could be accessing the Twitter API, your company/client&#8217;s web server, the file system, or a host of other sources of data outside of your application.</p>
<p>A Service makes remote calls and parses the results. After the results are parsed, the service will notify the rest of the application that data is ready and/or update a Model with the results. We want external data to live as short of a life as possible within our applications. As soon as we get the results, they are converted to a format that is specific to the application domain. This might be XML, JSON, or typed Objects from an AMF source. When we are working in a &#8220;controlled&#8221; environment, meaning the server-side mid-tier is within our control, sometimes we can avoid parsing altogether because the returned objects are already part of the application domain. In many situations we are accessing third-party servers and receiving &#8220;foreign&#8221; data. This is what we want to parse.</p>
<h2>Let&#8217;s make something!</h2>
<p>So with the definition behind us, lets look at how a Service functions within a Robotlegs AS3 application. This example is going to make use of the basic Twitter Search API.</p>
<p><span class="mt-enclosure mt-enclosure-image" style="display: inline;"><img alt="serve-talks-to-twitter.png" src="https://www.developria.com/2010/06/12/serve-talks-to-twitter.png" width="515" height="320" class="mt-image-center" style="text-align: center; display: block; margin: 0 auto 20px;" /></span> </p>
<p>The diagram above is the general overview of how our service will function. It receives a request, asks the server for some data, parses the results, and notifies the rest of the application. The requests are generally made from Mediators and Commands. In this example, we are going to keep it simple and make requests to the service from a Mediator. In the next article we will talk about how Commands are a great place to access services. Let&#8217;s take a look at the finished widget and then build it from the ground up.</p>
<p> <span id="more-600"></span></p>
<p>
<div align=center><iframe src="https://joelhooks.com/examples/serviceExample" width="300" height="300" scrolling="no" frameborder="0"></iframe></div>
</p>
<div align="center"><span class="mt-enclosure mt-enclosure-file" style="display: inline;"><a onclick="javascript:pageTracker._trackPageview('/outgoing/www.developria.com/2010/06/18/ServiceExample.zip');"  href="https://www.developria.com/2010/06/18/ServiceExample.zip">Download ServiceExample.zip</a></span></div>
<p>So it&#8217;s not the next TweetDeck, but it is about as simple as it gets when accessing the Twitter API. The widget access the Twitter Search API and returns the current results for &#8220;robotlegs.&#8221; We&#8217;ll start simple, and add complexity later if we need to. Let&#8217;s take a look at the pieces that go into to putting this together:</p>
<h3>ServiceExample.mxml</h3>

<div class="wp_codebox"><table><tr id="p6001"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="code" id="p600code1"><pre class="actionscript" style="font-family:monospace;"><span style="color: #66cc66;">&lt;</span>?<span style="color: #0066CC;">xml</span> <span style="color: #0066CC;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span>?<span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span>s:Application xmlns:fx=<span style="color: #ff0000;">&quot;https://ns.adobe.com/mxml/2009&quot;</span> 
               xmlns:s=<span style="color: #ff0000;">&quot;library://ns.adobe.com/flex/spark&quot;</span>
               xmlns:service=<span style="color: #ff0000;">&quot;robotlegs.examples.service.*&quot;</span> 
               xmlns:mx=<span style="color: #ff0000;">&quot;library://ns.adobe.com/flex/mx&quot;</span>
               xmlns:view=<span style="color: #ff0000;">&quot;robotlegs.examples.service.view.*&quot;</span>
               <span style="color: #0066CC;">width</span>=<span style="color: #ff0000;">&quot;300&quot;</span>
               <span style="color: #0066CC;">height</span>=<span style="color: #ff0000;">&quot;300&quot;</span><span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>fx:Declarations<span style="color: #66cc66;">&gt;</span>
        <span style="color: #66cc66;">&lt;</span>service:ServiceExampleContext contextView=<span style="color: #ff0000;">&quot;{this}&quot;</span><span style="color: #66cc66;">/&gt;</span>
    <span style="color: #66cc66;">&lt;/</span>fx:Declarations<span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>view:SearchResultsView<span style="color: #66cc66;">/&gt;</span>
<span style="color: #66cc66;">&lt;/</span>s:Application<span style="color: #66cc66;">&gt;</span></pre></td></tr></table></div>

<p>This is the main application view. You will notice that I have already made an instance of the ServiceExampleContext available in the Declarations tag. If you haven&#8217;t had a chance to read parts <a onclick="javascript:pageTracker._trackPageview('/outgoing/www.developria.com/2010/06/an-introduction-to-robotlegs-a.html');"  href="https://www.developria.com/2010/06/an-introduction-to-robotlegs-a.html">1</a> and <a onclick="javascript:pageTracker._trackPageview('/outgoing/www.developria.com/2010/06/an-introduction-to-robotlegs-a-1.html');"  href="https://www.developria.com/2010/06/an-introduction-to-robotlegs-a-1.html">2</a> in the series, I recommend doing so now. They cover basics of creating and initializing the Context. In addition to the ServiceExampleContext, you see that the SearchResultView has also been added to the application. This example only has the one view. Take a look at the context:</p>
<h3>ServiceExampleContext.as</h3>

<div class="wp_codebox"><table><tr id="p6002"><td class="line_numbers"><pre>1
2
3
4
5
6
7
</pre></td><td class="code" id="p600code2"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">class</span> ServiceExampleContext <span style="color: #0066CC;">extends</span> Context
<span style="color: #66cc66;">&#123;</span>
    override <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> startup<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
    <span style="color: #66cc66;">&#123;</span>
        mediatorMap.<span style="color: #006600;">mapView</span><span style="color: #66cc66;">&#40;</span>SearchResultsView, SearchResultsViewMediator<span style="color: #66cc66;">&#41;</span>;
    <span style="color: #66cc66;">&#125;</span>
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>In the SearchExampleContext we are mapping a mediator for the SearchResultsView. The SearchResultsView is a sub-class of the Spark List component:</p>
<h3>SearchResultsView.mxml</h3>

<div class="wp_codebox"><table><tr id="p6003"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
</pre></td><td class="code" id="p600code3"><pre class="actionscript" style="font-family:monospace;"><span style="color: #66cc66;">&lt;</span>?<span style="color: #0066CC;">xml</span> <span style="color: #0066CC;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span>?<span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span>s:<span style="color: #0066CC;">List</span>
        xmlns:fx=<span style="color: #ff0000;">&quot;https://ns.adobe.com/mxml/2009&quot;</span>
        xmlns:s=<span style="color: #ff0000;">&quot;library://ns.adobe.com/flex/spark&quot;</span>
        xmlns:mx=<span style="color: #ff0000;">&quot;library://ns.adobe.com/flex/mx&quot;</span>
        itemRenderer=<span style="color: #ff0000;">&quot;robotlegs.examples.service.view.renderers.SearchResultItemRenderer&quot;</span>
        <span style="color: #0066CC;">height</span>=<span style="color: #ff0000;">&quot;100%&quot;</span> <span style="color: #0066CC;">width</span>=<span style="color: #ff0000;">&quot;300&quot;</span><span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>s:layout<span style="color: #66cc66;">&gt;&lt;</span>s:VerticalLayout gap=<span style="color: #ff0000;">&quot;0&quot;</span> paddingBottom=<span style="color: #ff0000;">&quot;10&quot;</span> paddingRight=<span style="color: #ff0000;">&quot;10&quot;</span> paddingLeft=<span style="color: #ff0000;">&quot;10&quot;</span> paddingTop=<span style="color: #ff0000;">&quot;10&quot;</span><span style="color: #66cc66;">/&gt;&lt;/</span>s:layout<span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;/</span>s:List<span style="color: #66cc66;">&gt;</span></pre></td></tr></table></div>

<p>The SearchResultsView needs a mediator to allow it to communicate with the rest of the application:</p>
<h3>SearchResultsViewMediator.as</h3>

<div class="wp_codebox"><table><tr id="p6004"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code" id="p600code4"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">class</span> SearchResultsViewMediator <span style="color: #0066CC;">extends</span> Mediator
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #66cc66;">&#91;</span>Inject<span style="color: #66cc66;">&#93;</span>
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">var</span> view:SearchResultsView;
&nbsp;
    override <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> onRegister<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
    <span style="color: #66cc66;">&#123;</span>
        <span style="color: #808080; font-style: italic;">//Make the magic!</span>
    <span style="color: #66cc66;">&#125;</span>
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>Now that the SearchResultsView is properly mediated, we are ready to start looking at the service that will connect to the remote Twitter server and return some data for us to list. If you were looking closely at the SearchResultsView you will see that we have also given it an ItemRenderer. We will be looking at that in just a bit. First, let&#8217;s take a look at the basic service class that will connect to Twitter and fetch our data:</p>
<h3>TwitterSearchService.as</h3>

<div class="wp_codebox"><table><tr id="p6005"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
</pre></td><td class="code" id="p600code5"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">class</span> TwitterSearchService <span style="color: #0066CC;">extends</span> Actor <span style="color: #0066CC;">implements</span> ISearchService
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">var</span> loader:URLLoader;
&nbsp;
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> TwitterSearchService<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>
    <span style="color: #66cc66;">&#123;</span>
        loader = <span style="color: #000000; font-weight: bold;">new</span> URLLoader<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
    <span style="color: #66cc66;">&#125;</span>
&nbsp;
    <span style="color: #0066CC;">private</span> const TWITTER_SEARCH_ENDPOINT:<span style="color: #0066CC;">String</span> = <span style="color: #ff0000;">&quot;https://search.twitter.com/search.json&quot;</span>;
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> getResults<span style="color: #66cc66;">&#40;</span>forQuery:<span style="color: #0066CC;">String</span> = <span style="color: #ff0000;">&quot;robotlegs&quot;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
    <span style="color: #66cc66;">&#123;</span>
        <span style="color: #000000; font-weight: bold;">var</span> urlRequest:URLRequest = <span style="color: #000000; font-weight: bold;">new</span> URLRequest<span style="color: #66cc66;">&#40;</span>TWITTER_SEARCH_ENDPOINT<span style="color: #66cc66;">&#41;</span>;
        <span style="color: #000000; font-weight: bold;">var</span> params:URLVariables = <span style="color: #000000; font-weight: bold;">new</span> URLVariables<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
        params.<span style="color: #006600;">q</span> = HTMLStringTools.<span style="color: #006600;">htmlEscape</span><span style="color: #66cc66;">&#40;</span>forQuery<span style="color: #66cc66;">&#41;</span>;
        params.<span style="color: #006600;">rpp</span> = <span style="color: #cc66cc;">100</span>;
        urlRequest.<span style="color: #0066CC;">data</span> = params;
&nbsp;
        addLoaderListeners<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
        loader.<span style="color: #0066CC;">load</span><span style="color: #66cc66;">&#40;</span>urlRequest<span style="color: #66cc66;">&#41;</span>;
    <span style="color: #66cc66;">&#125;</span>
&nbsp;
    <span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">function</span> handleError<span style="color: #66cc66;">&#40;</span>event:SecurityErrorEvent<span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
    <span style="color: #66cc66;">&#123;</span>
        removeLoaderListeners<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
    <span style="color: #66cc66;">&#125;</span>
&nbsp;
    <span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">function</span> handleLoadComplete<span style="color: #66cc66;">&#40;</span>event:Event<span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
    <span style="color: #66cc66;">&#123;</span>
        removeLoaderListeners<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
    <span style="color: #66cc66;">&#125;</span>
&nbsp;
    <span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">function</span> addLoaderListeners<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
    <span style="color: #66cc66;">&#123;</span>
        loader.<span style="color: #006600;">addEventListener</span><span style="color: #66cc66;">&#40;</span>IOErrorEvent.<span style="color: #006600;">IO_ERROR</span>, handleError<span style="color: #66cc66;">&#41;</span>;
        loader.<span style="color: #006600;">addEventListener</span><span style="color: #66cc66;">&#40;</span>SecurityErrorEvent.<span style="color: #006600;">SECURITY_ERROR</span>, handleError<span style="color: #66cc66;">&#41;</span>;
        loader.<span style="color: #006600;">addEventListener</span><span style="color: #66cc66;">&#40;</span>Event.<span style="color: #006600;">COMPLETE</span>, handleLoadComplete<span style="color: #66cc66;">&#41;</span>;
    <span style="color: #66cc66;">&#125;</span>
&nbsp;
    <span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">function</span> removeLoaderListeners<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
    <span style="color: #66cc66;">&#123;</span>
        loader.<span style="color: #006600;">removeEventListener</span><span style="color: #66cc66;">&#40;</span>IOErrorEvent.<span style="color: #006600;">IO_ERROR</span>, handleError<span style="color: #66cc66;">&#41;</span>;
        loader.<span style="color: #006600;">removeEventListener</span><span style="color: #66cc66;">&#40;</span>SecurityErrorEvent.<span style="color: #006600;">SECURITY_ERROR</span>, handleError<span style="color: #66cc66;">&#41;</span>;
        loader.<span style="color: #006600;">removeEventListener</span><span style="color: #66cc66;">&#40;</span>Event.<span style="color: #006600;">COMPLETE</span>, handleLoadComplete<span style="color: #66cc66;">&#41;</span>;
    <span style="color: #66cc66;">&#125;</span>
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>TwitterSearchService has one public method, getResults(). It fetches results for a search string from the Twitter Search API. It is using the URLLoader to accomplish this and accessing the API directly. There are a number of excellent Twitter API libraries for Actionscript available. I&#8217;d highly recommend investigating them if you are trying to write the next TweetDeck. With the URLLoader the TwitterSearchService makes a simple request to the appropriate endpoint. Listeners are added to the URLLoader, and the fault/result handlers catch whatever is thrown back. Right now handleLoadComplete isn&#8217;t actually doing anything except removing the listeners, which isn&#8217;t very useful, but we will remedy that in just a moment.</p>
<p>Note that TwitterSearchService extends Actor and implements ISearchService. Actor simply provides convenient access to the EventDispatcher for this context. With services, it is generally considered best practice to implement an interface. Take a look at ISearchService:</p>
<h3>ISearchService.as</h3>

<div class="wp_codebox"><table><tr id="p6006"><td class="line_numbers"><pre>1
2
3
4
</pre></td><td class="code" id="p600code6"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">public</span> <span style="color: #0066CC;">interface</span> ISearchService
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">function</span> getResults<span style="color: #66cc66;">&#40;</span>forQuery:<span style="color: #0066CC;">String</span>=<span style="color: #ff0000;">&quot;robotlegs&quot;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>;
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>When you implement an interface for a service class, it makes it <b>really easy</b> to swap the service out. Why would you want to do that? When connecting to remote services it is sometimes more effectiveduring development to create mock data services with 0 latency. You could make a MockTwitterJsonService that returned the same static, hardcoded results every time. This approach is critical for unit testing, which will be covered in another article, as well as just general development. Many times you are will find yourself developing in parallel to the team developing the service. The ability to create and replace mock services with live ones provides a lot of flexibility.</p>
<p>You will recall in the definition of a Robotlegs service above that we talked about parsing data as soon as it is returned from the remote service. In the case of the Twitter Search API endpoint we are using, we receive a JSON string as the result. JSON is a great format, but we don&#8217;t want to start passing around raw JSON strings in our application. It loses the benefit of strong typing, and besides, we want to pick and choose what information we are going to use in our application. In this case, we only need the user name and actual tweet text. </p>
<h3>Tweet.as</h3>

<div class="wp_codebox"><table><tr id="p6007"><td class="line_numbers"><pre>1
2
3
4
5
</pre></td><td class="code" id="p600code7"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">class</span> Tweet
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">var</span> user:<span style="color: #0066CC;">String</span>;
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">var</span> <span style="color: #0066CC;">message</span>:<span style="color: #0066CC;">String</span>;
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>This class needs a sandwich! Not a lot going on here, but we now have something to convert the results to.</p>
<h3>TwitterSearchResultParser.as</h3>

<div class="wp_codebox"><table><tr id="p6008"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code" id="p600code8"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">class</span> TwitterSearchResultParser <span style="color: #0066CC;">implements</span> ISearchResultParser
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> parseSearchResults<span style="color: #66cc66;">&#40;</span>results:<span style="color: #0066CC;">Object</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">Array</span>
    <span style="color: #66cc66;">&#123;</span>
        <span style="color: #000000; font-weight: bold;">var</span> decoder:JSONDecoder = <span style="color: #000000; font-weight: bold;">new</span> JSONDecoder<span style="color: #66cc66;">&#40;</span><span style="color: #0066CC;">String</span><span style="color: #66cc66;">&#40;</span>results<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>;
        <span style="color: #000000; font-weight: bold;">var</span> resultObjects:<span style="color: #0066CC;">Array</span> = decoder.<span style="color: #006600;">getValue</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>.<span style="color: #006600;">results</span>;
        <span style="color: #000000; font-weight: bold;">var</span> tweets:<span style="color: #0066CC;">Array</span> = <span style="color: #66cc66;">&#91;</span><span style="color: #66cc66;">&#93;</span>;
        <span style="color: #b1b100;">for</span> <span style="color: #b1b100;">each</span><span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">var</span> result:<span style="color: #0066CC;">Object</span> <span style="color: #b1b100;">in</span> resultObjects<span style="color: #66cc66;">&#41;</span>
        <span style="color: #66cc66;">&#123;</span>
            <span style="color: #000000; font-weight: bold;">var</span> tweet:Tweet = <span style="color: #000000; font-weight: bold;">new</span> Tweet<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
            tweet.<span style="color: #006600;">user</span> = result.<span style="color: #006600;">from_user</span>;
            tweet.<span style="color: #0066CC;">message</span> = HTMLStringTools.<span style="color: #006600;">htmlUnescape</span><span style="color: #66cc66;">&#40;</span>result.<span style="color: #0066CC;">text</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
            tweets.<span style="color: #0066CC;">push</span><span style="color: #66cc66;">&#40;</span>tweet<span style="color: #66cc66;">&#41;</span>
        <span style="color: #66cc66;">&#125;</span>
        <span style="color: #b1b100;">return</span> tweets;
    <span style="color: #66cc66;">&#125;</span>
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>The results parser is a straight forward utility class. For the same reasons the service implements an interface, the results parser does as well. It has one method, parseSearchResults() which takes a results argument. The results from Twitter will be a string, but other results might be XML if we were to use local mock data or change which Twitter service we were accessing. The JSON string is encoded into objects, which are then converted to our Tweet value object from above. The resulting Array is returned as the result. Now that the parser is ready to go, we want to supply it to the service so that it can parse the results.</p>
<p>You have several options for giving the service access to the parser class. You could make its methods static, you could create a <b>new</b> instance of the parser class within the service, or you can leverage dependency injection to supply the parser to the service class. The problem with the first two options is that it makes it a lot harder to swap out the parser class later if we needed to.</p>
<p>We are in the land of dependency injection now, so why not map the parser for injection? If we do this, it will be one single line in our context to change if we want to switch it out. There is no digging around in our classes commenting out lines and changing types. because both the parser and service conform to interfaces. If you&#8217;d like to see how easy it is to swap out a service, take a look at the <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com/robotlegs/robotlegs-demos-Bundle/blob/master/FlickrImageGallery/src/org/robotlegs/demos/imagegallery/ImageGalleryContext.as#L44');"  href="https://github.com/robotlegs/robotlegs-demos-Bundle/blob/master/FlickrImageGallery/src/org/robotlegs/demos/imagegallery/ImageGalleryContext.as#L44">Flickr Image Gallery</a> in the <a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com/robotlegs/robotlegs-demos-Bundle');"  href="https://github.com/robotlegs/robotlegs-demos-Bundle">Robotlegs Demo Bundle</a>.</p>
<p>Let&#8217;s look at mapping the service and parser interfaces in the context:</p>
<h3>ServiceExampleContext.as</h3>

<div class="wp_codebox"><table><tr id="p6009"><td class="line_numbers"><pre>1
2
3
4
5
6
7
</pre></td><td class="code" id="p600code9"><pre class="actionscript" style="font-family:monospace;">override <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> startup<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
<span style="color: #66cc66;">&#123;</span>
    mediatorMap.<span style="color: #006600;">mapView</span><span style="color: #66cc66;">&#40;</span>SearchResultsView, SearchResultsViewMediator<span style="color: #66cc66;">&#41;</span>;
&nbsp;
    injector.<span style="color: #006600;">mapSingletonOf</span><span style="color: #66cc66;">&#40;</span>ISearchService, TwitterSearchService<span style="color: #66cc66;">&#41;</span>;
    injector.<span style="color: #006600;">mapSingletonOf</span><span style="color: #66cc66;">&#40;</span>ISearchResultParser, TwitterSearchResultParser<span style="color: #66cc66;">&#41;</span>;
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>This is the first time we have used the mapSingletonOf() method of the injector. It behaves much the same way as mapSingleton, with one critical difference. With mapSingletonOf() you are mapping the class you wish to inject via its interface or base class. Let&#8217;s take a look at the TwitterSearchService and see how this is injected into our classes:</p>
<h3>TwitterSearchService.as</h3>

<div class="wp_codebox"><table><tr id="p60010"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="code" id="p600code10"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">var</span> _parser:ISearchResultParser;
&nbsp;
<span style="color: #66cc66;">&#91;</span>Inject<span style="color: #66cc66;">&#93;</span>
<span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> <span style="color: #0066CC;">set</span> parser<span style="color: #66cc66;">&#40;</span>value:ISearchResultParser<span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
<span style="color: #66cc66;">&#123;</span>
    _parser = value;
<span style="color: #66cc66;">&#125;</span>
&nbsp;
<span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">var</span> loader:URLLoader;
&nbsp;
<span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> TwitterSearchService<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>
<span style="color: #66cc66;">&#123;</span>
    loader = <span style="color: #000000; font-weight: bold;">new</span> URLLoader<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>With the above code added to the TwitterSearchService you are now injecting the parser that was mapped into it. There are a couple of interesting things happening here. You will notice right away that the parser is of type ISearchResultParser. Since we used mapSingletonOf() to map our parser, it looks for a property of the base class or interface type that we mapped. It will actually inject the TwitterSearchResultParser, but we will access it via its interface. This approach is referred to as <a onclick="javascript:pageTracker._trackPageview('/outgoing/www.developria.com/2009/09/as3-object-oriented-concepts-p.html');"  href="https://www.developria.com/2009/09/as3-object-oriented-concepts-p.html">polymorphism</a> and is a power object-oriented concept.</p>
<p>We are also placing the [Inject] tag above the setter function and not the property itself. In addition to property injection, which we have used up until now, Robotlegs supports setter and constructor injection. In this case we are using setter injection to supply the value to the parser property&#8217;s setter function. Constructor injection doesn&#8217;t even require the [Inject] metadata to function. We will talk about construction injection later, for now we need to remember to add the setter function to the ISearchService interface:</p>
<h3>ISearchService.as</h3>

<div class="wp_codebox"><table><tr id="p60011"><td class="line_numbers"><pre>1
2
3
4
5
6
</pre></td><td class="code" id="p600code11"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">public</span> <span style="color: #0066CC;">interface</span> ISearchService
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">function</span> getResults<span style="color: #66cc66;">&#40;</span>forQuery:<span style="color: #0066CC;">String</span>=<span style="color: #ff0000;">&quot;robotlegs&quot;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>;
&nbsp;
    <span style="color: #000000; font-weight: bold;">function</span> <span style="color: #0066CC;">set</span> parser<span style="color: #66cc66;">&#40;</span>value:ISearchResultParser<span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>;
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>Now that the parser is all sorted out, we are ready to actually use it in the service. The result handler is the likely spot to make use of the parser, so we will add some code there:</p>
<h3>TwitterSearchService.as</h3>

<div class="wp_codebox"><table><tr id="p60012"><td class="line_numbers"><pre>1
2
3
4
5
6
7
</pre></td><td class="code" id="p600code12"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">function</span> handleLoadComplete<span style="color: #66cc66;">&#40;</span>event:Event<span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #000000; font-weight: bold;">var</span> <span style="color: #0066CC;">data</span>:<span style="color: #0066CC;">Object</span> = loader.<span style="color: #0066CC;">data</span>;
    <span style="color: #000000; font-weight: bold;">var</span> results:<span style="color: #0066CC;">Array</span> = _parser.<span style="color: #006600;">parseSearchResults</span><span style="color: #66cc66;">&#40;</span><span style="color: #0066CC;">data</span><span style="color: #66cc66;">&#41;</span>;
    dispatch<span style="color: #66cc66;">&#40;</span><span style="color: #000000; font-weight: bold;">new</span> SearchResultEvent<span style="color: #66cc66;">&#40;</span>SearchResultEvent.<span style="color: #006600;">RECEIVED</span>, results<span style="color: #66cc66;">&#41;</span><span style="color: #66cc66;">&#41;</span>
    removeLoaderListeners<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>There we go, the data is extracted from the URLLoader, sent to the parser to be converted into an Array of Tweet objects, an event is dispatched notifying the rest of the app that we now have results, and the event listeners are removed. The SearchResultEvent is a simple custom event that has an array as its payload:</p>
<h3>SearchResultEvent.as</h3>

<div class="wp_codebox"><table><tr id="p60013"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code" id="p600code13"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">class</span> SearchResultEvent <span style="color: #0066CC;">extends</span> Event
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #0066CC;">public</span> <span style="color: #0066CC;">static</span> const RECEIVED:<span style="color: #0066CC;">String</span> = <span style="color: #ff0000;">&quot;searchResultsReceived&quot;</span>;
&nbsp;
    <span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">var</span> _results:<span style="color: #0066CC;">Array</span>;
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> <span style="color: #0066CC;">get</span> results<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">Array</span>
    <span style="color: #66cc66;">&#123;</span>
        <span style="color: #b1b100;">return</span> _results;
    <span style="color: #66cc66;">&#125;</span>
&nbsp;
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> SearchResultEvent<span style="color: #66cc66;">&#40;</span><span style="color: #0066CC;">type</span>:<span style="color: #0066CC;">String</span>, results:<span style="color: #0066CC;">Array</span> = <span style="color: #000000; font-weight: bold;">null</span><span style="color: #66cc66;">&#41;</span>
    <span style="color: #66cc66;">&#123;</span>
        <span style="color: #0066CC;">super</span><span style="color: #66cc66;">&#40;</span><span style="color: #0066CC;">type</span><span style="color: #66cc66;">&#41;</span>;
        _results = results;
    <span style="color: #66cc66;">&#125;</span>
&nbsp;
    override <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> clone<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>:Event
    <span style="color: #66cc66;">&#123;</span>
        <span style="color: #b1b100;">return</span> <span style="color: #000000; font-weight: bold;">new</span> SearchResultEvent<span style="color: #66cc66;">&#40;</span><span style="color: #0066CC;">type</span>, results<span style="color: #66cc66;">&#41;</span>
    <span style="color: #66cc66;">&#125;</span>
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>At this point in development we have a service that should work, a mediated view component, and an event being dispatched to deaf ears. It would be more accurate to say an event that is never dispatched at all. We haven&#8217;t wired the service anywhere to call getResult(). We will take care of that in the SearchResultViewMediator:</p>
<h3>SearchResultsViewMediator.as</h3>

<div class="wp_codebox"><table><tr id="p60014"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="code" id="p600code14"><pre class="actionscript" style="font-family:monospace;"><span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">class</span> SearchResultsViewMediator <span style="color: #0066CC;">extends</span> Mediator
<span style="color: #66cc66;">&#123;</span>
    <span style="color: #66cc66;">&#91;</span>Inject<span style="color: #66cc66;">&#93;</span>
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">var</span> view:SearchResultsView;
&nbsp;
    <span style="color: #66cc66;">&#91;</span>Inject<span style="color: #66cc66;">&#93;</span>
    <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">var</span> service:ISearchService;
&nbsp;
    override <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> onRegister<span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
    <span style="color: #66cc66;">&#123;</span>
        service.<span style="color: #006600;">getResults</span><span style="color: #66cc66;">&#40;</span><span style="color: #66cc66;">&#41;</span>;
&nbsp;
        addContextListener<span style="color: #66cc66;">&#40;</span>SearchResultEvent.<span style="color: #006600;">RECEIVED</span>, handleResultsReceived<span style="color: #66cc66;">&#41;</span>
    <span style="color: #66cc66;">&#125;</span>
&nbsp;
    <span style="color: #0066CC;">private</span> <span style="color: #000000; font-weight: bold;">function</span> handleResultsReceived<span style="color: #66cc66;">&#40;</span>event:SearchResultEvent<span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
    <span style="color: #66cc66;">&#123;</span>
        view.<span style="color: #006600;">dataProvider</span> = <span style="color: #000000; font-weight: bold;">new</span> ArrayCollection<span style="color: #66cc66;">&#40;</span>event.<span style="color: #006600;">results</span><span style="color: #66cc66;">&#41;</span>;
    <span style="color: #66cc66;">&#125;</span>
<span style="color: #66cc66;">&#125;</span></pre></td></tr></table></div>

<p>Now we are talking! Again the service is injected via its interface, and in the onRegister() we make a call to getResults(). The magical hamsters at Twitter HQ generate some content that our service parses and notifies the rest of the application with an event carrying the data. The mediator is listening for that event, and in handleResultsReceived it supplies the results to the view&#8217;s dataProvider as an ArrayCollection. All we need to add is the ItemRenderer and we will have a fully semi-functional Twitter client:</p>
<h3>SearchResultItemRenderer.mxml</h3>

<div class="wp_codebox"><table><tr id="p60015"><td class="line_numbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre></td><td class="code" id="p600code15"><pre class="actionscript" style="font-family:monospace;"><span style="color: #66cc66;">&lt;</span>?<span style="color: #0066CC;">xml</span> <span style="color: #0066CC;">version</span>=<span style="color: #ff0000;">&quot;1.0&quot;</span>?<span style="color: #66cc66;">&gt;</span>
<span style="color: #66cc66;">&lt;</span>s:ItemRenderer
        xmlns:fx=<span style="color: #ff0000;">&quot;https://ns.adobe.com/mxml/2009&quot;</span>
        xmlns:s=<span style="color: #ff0000;">&quot;library://ns.adobe.com/flex/spark&quot;</span>
        xmlns:mx=<span style="color: #ff0000;">&quot;library://ns.adobe.com/flex/mx&quot;</span>
        <span style="color: #0066CC;">width</span>=<span style="color: #ff0000;">&quot;260&quot;</span> <span style="color: #0066CC;">height</span>=<span style="color: #ff0000;">&quot;85&quot;</span><span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>fx:Script<span style="color: #66cc66;">&gt;&lt;!</span><span style="color: #66cc66;">&#91;</span>CDATA<span style="color: #66cc66;">&#91;</span>
        <span style="color: #0066CC;">import</span> robotlegs.<span style="color: #006600;">examples</span>.<span style="color: #006600;">service</span>.<span style="color: #006600;">model</span>.<span style="color: #006600;">Tweet</span>;
&nbsp;
        override <span style="color: #0066CC;">public</span> <span style="color: #000000; font-weight: bold;">function</span> <span style="color: #0066CC;">set</span> <span style="color: #0066CC;">data</span><span style="color: #66cc66;">&#40;</span>value:<span style="color: #0066CC;">Object</span><span style="color: #66cc66;">&#41;</span>:<span style="color: #0066CC;">void</span>
        <span style="color: #66cc66;">&#123;</span>
            <span style="color: #0066CC;">super</span>.<span style="color: #0066CC;">data</span> = value;
            <span style="color: #000000; font-weight: bold;">var</span> searchResult:Tweet = value as Tweet;
            <span style="color: #b1b100;">if</span><span style="color: #66cc66;">&#40;</span>searchResult<span style="color: #66cc66;">&#41;</span>
            <span style="color: #66cc66;">&#123;</span>
                <span style="color: #0066CC;">message</span>.<span style="color: #0066CC;">text</span> = searchResult.<span style="color: #0066CC;">message</span>;
                username.<span style="color: #0066CC;">text</span> = searchResult.<span style="color: #006600;">user</span>;
            <span style="color: #66cc66;">&#125;</span>
            <span style="color: #b1b100;">else</span>
            <span style="color: #66cc66;">&#123;</span>
                <span style="color: #0066CC;">message</span>.<span style="color: #0066CC;">text</span> = <span style="color: #ff0000;">&quot;&quot;</span>;
                username.<span style="color: #0066CC;">text</span> = <span style="color: #ff0000;">&quot;&quot;</span>;
            <span style="color: #66cc66;">&#125;</span>
        <span style="color: #66cc66;">&#125;</span>
 <span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&#93;</span><span style="color: #66cc66;">&gt;&lt;/</span>fx:Script<span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>s:layout<span style="color: #66cc66;">&gt;</span>
        <span style="color: #66cc66;">&lt;</span>s:VerticalLayout paddingBottom=<span style="color: #ff0000;">&quot;5&quot;</span> paddingRight=<span style="color: #ff0000;">&quot;5&quot;</span> paddingLeft=<span style="color: #ff0000;">&quot;5&quot;</span> paddingTop=<span style="color: #ff0000;">&quot;5&quot;</span><span style="color: #66cc66;">/&gt;</span>
    <span style="color: #66cc66;">&lt;/</span>s:layout<span style="color: #66cc66;">&gt;</span>
    <span style="color: #66cc66;">&lt;</span>s:Label id=<span style="color: #ff0000;">&quot;username&quot;</span> <span style="color: #0066CC;">width</span>=<span style="color: #ff0000;">&quot;100%&quot;</span> maxDisplayedLines=<span style="color: #ff0000;">&quot;1&quot;</span> fontWeight=<span style="color: #ff0000;">&quot;bold&quot;</span><span style="color: #66cc66;">/&gt;</span>
    <span style="color: #66cc66;">&lt;</span>s:Label id=<span style="color: #ff0000;">&quot;message&quot;</span> <span style="color: #0066CC;">width</span>=<span style="color: #ff0000;">&quot;100%&quot;</span> maxDisplayedLines=<span style="color: #ff0000;">&quot;4&quot;</span> <span style="color: #66cc66;">/&gt;</span>
<span style="color: #66cc66;">&lt;/</span>s:ItemRenderer<span style="color: #66cc66;">&gt;</span></pre></td></tr></table></div>

<p>And there you have it. A list of tweets that mention Robotlegs. Glorious indeed! I would encourage you to play with this application a bit. Add a control bar to change the search terms. Add the ability to login, retrieve your timeline, and maybe post a Tweet. If you don&#8217;t want to piss off all your nerd friends, start a new Twitter account to play with while you develop. I hear they have plenty of extras available.</p>
<p>Now that we have services, we&#8217;ve almost covered the full scope of tools for utilizing the Robotlegs MVC+S implementation. All that we have left to cover is Commands. Commands will let us decouple the code and provide re-usable &#8220;actions&#8221; that are triggered by events.</p>
<p>If you can&#8217;t wait, there are articles <a href="https://joelhooks.com">on my blog</a> (and lots of others across the internets) dealing with various Robotlegs topics including <a href="https://joelhooks.com/2009/11/11/a-walkthrough-of-an-air-twitter-client-using-robotlegs-mvcs/">this 25 minute screencast</a>. John Lindquist has a <a onclick="javascript:pageTracker._trackPageview('/outgoing/johnlindquist.com/2009/11/18/robotlegs-hello-world-video-tutorial/');"  href="https://johnlindquist.com/2009/11/18/robotlegs-hello-world-video-tutorial/">Hello World screencast</a> on his blog. Additionally there is a <a onclick="javascript:pageTracker._trackPageview('/outgoing/wiki.github.com/robotlegs/robotlegs-framework/best-practices');"  href="https://wiki.github.com/robotlegs/robotlegs-framework/best-practices">Best Practices document</a> that has proven helpful for many. You can always hit the <a onclick="javascript:pageTracker._trackPageview('/outgoing/knowledge.robotlegs.org/');"  href="https://knowledge.robotlegs.org/">Robotlegs Knowledge Base</a> for help and support. It has an active group of community volunteers, including myself, that diligently answer questions regarding all things Robotlegs. Additionally I participated in writing Flex 4 in Action, which has 22 pages of Robotlegs material.</p>
<ul>
<li>
      <a href="https://joelhooks.com/2011/03/12/an-introduction-to-robotlegs-as3-part-1-context-and-mediators/">Part One: Context and Mediators</a>
    </li>
<li>
      <a href="https://joelhooks.com/2011/03/12/an-introduction-to-robotlegs-as3-part-2-models/">Part Two: Models</a>
    </li>
</ul>
<style type="text/css">
.buybox{margin-top:30px;margin-bottom:15px;padding:10px;background:rgba(247,242,228,0.55);border:1px solid #e6e6e6;display:block;margin-left:auto;margin-right:auto;width:80%;text-align:center}.buybox .button:hover{text-decoration:none !important;background:#3282cc}.buybox .button{display:inline-block;width:232px;text-decoration:none;background:#3488d6;background:#3488d6;color:white;padding:15px;border:1px solid #333;text-align:center;cursor:pointer;border-radius:3px;box-shadow:0px 1px 2px #999}@media screen and (max-width: 450px){.buybox .button{width:80%;font-size:12px;font-weight:bold}}.buybox .buyhead{font-weight:bold;font-size:26px;font-family:"freight-sans-pro",sans-serif}.buybox .small{font-size:10px}.buybox .text{text-align:left}.buybox .small{font-size:10px}.buybox .quote{text-align:center;padding:15px;color:#666}
</style>

<div class="buybox">
  <span class="buyhead">Want to make more money and love what you do? If you
  answered "Yes!" then you will enjoy my Consultancy Masterclass Sketchnotes.</span><br><p class="text">Brennan charges <strong>$1,799</strong>
 for <a href="https://doubleyourfreelancingrate.com/build-a-consultancy">his masterclass</a>
and it is worth every penny. If you are on the fence about the class, or would
like to look at the "essence" of the class in <strong>10 pages of lovingly illustrated sketchnotes</strong>, click below and
they are yours for <strong>$9.99</strong> suggested minimum price. It is a steal
when you consider how these concepts can boost your revenues as a freelancer or
consultant!</p>
  <p class="quote">"Awesome! I love these." - Brennan Dunn</p>
  <a class="button" href="https://gum.co/consultancyclass">Get the DRM Free PDF Now!</a>
  <p class="small">100% satisfaction gurantee. If you aren't happy with these
  notes, for <strong>any</strong> reason, just let me know and I will refund your money!</p>
</div>
<script type="text/javascript" src="https://gumroad.com/js/gumroad.js"></script>
<!-- Creative Commons License -->
<div class="cc-block"><a rel="license" href="https://creativecommons.org/licenses/by/3.0/us/"><img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/3.0/us/88x31.png" class="cc-button" /></a><br />The <em><a href="https://joelhooks.com/2011/03/12/an-introduction-to-robotlegs-as3-part-3-services/">An Introduction to Robotlegs AS3 Part 3: Services</a></em> by <em><a href="https://joelhooks.com">Joel Hooks</a></em>, unless otherwise expressly stated, is licensed under a <a rel="license" href="https://creativecommons.org/licenses/by/3.0/us/">Creative Commons Attribution 3.0 United States License</a>.</div>
<!-- /Creative Commons License -->
											</div><!-- .entry-content -->
	
				</article><!-- #post-## -->
				
<div id="disqus_thread">
                    <div id="dsq-content">


            <ul id="dsq-comments">
                    <li class="comment even thread-even depth-1" id="dsq-comment-708">
        <div id="dsq-comment-header-708" class="dsq-comment-header">
            <cite id="dsq-cite-708">
https://twitter.com/nbousquet                <span id="dsq-author-user-708">Nicolas Bousquet</span>
            </cite>
        </div>
        <div id="dsq-comment-body-708" class="dsq-comment-body">
            <div id="dsq-comment-message-708" class="dsq-comment-message"><p>#services with #robotlegs explained &#8211; <a onclick="javascript:pageTracker._trackPageview('/outgoing/goo.gl/fb/qBvAh');"  href="https://goo.gl/fb/qBvAh" rel="nofollow">https://goo.gl/fb/qBvAh</a></p>
</div>
        </div>
    </li>

    </li>
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-728">
        <div id="dsq-comment-header-728" class="dsq-comment-header">
            <cite id="dsq-cite-728">
https://teemusk.com                <span id="dsq-author-user-728">Teemon</span>
            </cite>
        </div>
        <div id="dsq-comment-body-728" class="dsq-comment-body">
            <div id="dsq-comment-message-728" class="dsq-comment-message"><p>Thanks for great tutorials.<br />I wonder where does HTMLStringTools come from?<br />I found the JSONDecoder from as corelibs.<br />Part 1 and 2 were really good for a beginner. part 3 is somewhat foggy and a bit too fast for me. I could not make it work unfortunately <img src='https://joelhooks.com/wp-includes/images/smilies/icon_sad.gif' alt=':(' class='wp-smiley' /> </p>
</div>
        </div>
    </li>

    </li>
    <li class="comment even thread-even depth-1" id="dsq-comment-729">
        <div id="dsq-comment-header-729" class="dsq-comment-header">
            <cite id="dsq-cite-729">
https://joelhooks.com                <span id="dsq-author-user-729">Joel Hooks</span>
            </cite>
        </div>
        <div id="dsq-comment-body-729" class="dsq-comment-body">
            <div id="dsq-comment-message-729" class="dsq-comment-message"><p>There is <a onclick="javascript:pageTracker._trackPageview('/outgoing/www.developria.com/2010/06/18/ServiceExample.zip');"  href="https://www.developria.com/2010/06/18/ServiceExample.zip" rel="nofollow">a download link</a> above of the entire project that contains the HTMLStringTools. I don&#39;t remember where I conjured that up from unfortunately (this tutorial was written almost a year ago)</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-731">
        <div id="dsq-comment-header-731" class="dsq-comment-header">
            <cite id="dsq-cite-731">
                <span id="dsq-author-user-731">Ivano Ras</span>
            </cite>
        </div>
        <div id="dsq-comment-body-731" class="dsq-comment-body">
            <div id="dsq-comment-message-731" class="dsq-comment-message"><p>Yes, maybe this 3rd tut was a teensy bit more complex than the previous two BUT definitely well worth !!!</p>
<p>Namaste.</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment even thread-even depth-1" id="dsq-comment-732">
        <div id="dsq-comment-header-732" class="dsq-comment-header">
            <cite id="dsq-cite-732">
https://joelhooks.com                <span id="dsq-author-user-732">Joel Hooks</span>
            </cite>
        </div>
        <div id="dsq-comment-body-732" class="dsq-comment-body">
            <div id="dsq-comment-message-732" class="dsq-comment-message"><p>yes, definitely more complex. It was meant to be a progression. Glad you enjoyed it :&gt;</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-752">
        <div id="dsq-comment-header-752" class="dsq-comment-header">
            <cite id="dsq-cite-752">
                <span id="dsq-author-user-752">Sean Thayne</span>
            </cite>
        </div>
        <div id="dsq-comment-body-752" class="dsq-comment-body">
            <div id="dsq-comment-message-752" class="dsq-comment-message"><p>Joel, I&#39;m curious why connect the service to the mediator. According to RobotLegs diagram is shows to connect the service to context.Â </p>
<p>I&#39;ve struggled with the diagrams concept before, but eventually switched to using Shaun Smith&#39;s oil package which handles promises with a token.</p>
<p>I&#39;m mostly curious of what the best practices are for connecting services to RobotLegs App&#8230;</p>
<p>Also I was curious if you knew of any large scale open source apps using robotlegs. I would love to peak into how the code is laid out. There are some demos under the github robotlegs-demos-bundle. But they are all small apps. I&#39;m curious how to organize a app.</p>
<p>In my case I&#39;m starting to create a admin interface for a site.</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment even thread-even depth-1" id="dsq-comment-753">
        <div id="dsq-comment-header-753" class="dsq-comment-header">
            <cite id="dsq-cite-753">
https://joelhooks.com                <span id="dsq-author-user-753">Joel Hooks</span>
            </cite>
        </div>
        <div id="dsq-comment-body-753" class="dsq-comment-body">
            <div id="dsq-comment-message-753" class="dsq-comment-message"><p>The service is injected into the mediator for convenience. This coupling could be removed with the use of a command.</p>
<p>In terms of organization, the small apps areÂ representativeÂ of how I&#39;d structure a larger app.Â </p>
<p><a onclick="javascript:pageTracker._trackPageview('/outgoing/github.com/joelhooks/robotlegs-examples-AddressBook');"  href="https://github.com/joelhooks/robotlegs-examples-AddressBook" rel="nofollow">https://github.com/joelhooks/r&#8230;</a></p>
<p>The address book is a bit bigger, maybe it would help. What doesn&#39;t exist is a solid example of a &#8220;large&#8221; robotlegs modular application.</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-767">
        <div id="dsq-comment-header-767" class="dsq-comment-header">
            <cite id="dsq-cite-767">
                <span id="dsq-author-user-767">Jim</span>
            </cite>
        </div>
        <div id="dsq-comment-body-767" class="dsq-comment-body">
            <div id="dsq-comment-message-767" class="dsq-comment-message"><p>Just a question: Why creating on every loop a new tweet object (var tweet:Tweet = new Tweet();) in de file <a onclick="javascript:pageTracker._trackPageview('/outgoing/TwitterSearchResultParser.as');"  href="https://TwitterSearchResultParser.as" rel="nofollow">TwitterSearchResultParser.as</a>. Why don&#39;t you put above the for loop?</p>
<p>Thanks in advance</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment even thread-even depth-1" id="dsq-comment-768">
        <div id="dsq-comment-header-768" class="dsq-comment-header">
            <cite id="dsq-cite-768">
https://joelhooks.com                <span id="dsq-author-user-768">Joel Hooks</span>
            </cite>
        </div>
        <div id="dsq-comment-body-768" class="dsq-comment-body">
            <div id="dsq-comment-message-768" class="dsq-comment-message"><p>I wasn&#39;t shooting for &#8220;highly optimized&#8221; in the example <img src='https://joelhooks.com/wp-includes/images/smilies/icon_wink.gif' alt=';)' class='wp-smiley' /> </p>
</div>
        </div>
    </li>

    </li>
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-829">
        <div id="dsq-comment-header-829" class="dsq-comment-header">
            <cite id="dsq-cite-829">
                <span id="dsq-author-user-829">Paul Bradley</span>
            </cite>
        </div>
        <div id="dsq-comment-body-829" class="dsq-comment-body">
            <div id="dsq-comment-message-829" class="dsq-comment-message"><p>What would be the best way to set an web service endpoint variable from a remote config XML using Robotlegs on your Service class? Have an application initialize Command or a config Service that gets all config XML properties and injects them to all Service endpoint variables? Or a config Service that updates a config Model then injects the Model to the Mediator?</p>
<p>Thanks.</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment even thread-even depth-1" id="dsq-comment-830">
        <div id="dsq-comment-header-830" class="dsq-comment-header">
            <cite id="dsq-cite-830">
https://joelhooks.com                <span id="dsq-author-user-830">Joel Hooks</span>
            </cite>
        </div>
        <div id="dsq-comment-body-830" class="dsq-comment-body">
            <div id="dsq-comment-message-830" class="dsq-comment-message"><p>The app needs to grab the XML config from from the remote service and store that in a ConfigModel that wraps a ConfigVO. Typically I would use a state machine to define the initial bootstrap for the initial call for the configuration.</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment odd alt thread-odd thread-alt depth-1" id="dsq-comment-948">
        <div id="dsq-comment-header-948" class="dsq-comment-header">
            <cite id="dsq-cite-948">
                <span id="dsq-author-user-948">Mutasem Barjawi</span>
            </cite>
        </div>
        <div id="dsq-comment-body-948" class="dsq-comment-body">
            <div id="dsq-comment-message-948" class="dsq-comment-message"><p>I think you shouldn&#8217;t move the creation of new Tweet objects outside the loop&#8230; otherwise, you&#8217;ll end up inserting the same object into all the Array cells&#8230; which means the same tweet will be repeated in the list.</p>
</div>
        </div>
    </li>

    </li>
    <li class="comment even thread-even depth-1" id="dsq-comment-949">
        <div id="dsq-comment-header-949" class="dsq-comment-header">
            <cite id="dsq-cite-949">
                <span id="dsq-author-user-949">Mutasem Barjawi</span>
            </cite>
        </div>
        <div id="dsq-comment-body-949" class="dsq-comment-body">
            <div id="dsq-comment-message-949" class="dsq-comment-message"><p>In these tutorials, you used the following two methods for listening for events:</p>
<p>addViewListener<br />
addContextListener</p>
<p>I was wondering whats the difference between those and the one used in your TwitterClient screencast:<br />
eventMap.mapListener</p>
<p>Thanks</p>
</div>
        </div>
    </li>

    </li>
            </ul>


        </div>

    </div>

<script type="text/javascript">
/* <![CDATA[ */
    var disqus_url = 'https://joelhooks.com/2011/03/12/an-introduction-to-robotlegs-as3-part-3-services/';
    var disqus_identifier = '600 https://joelhooks.com/?p=600';
    var disqus_container_id = 'disqus_thread';
    var disqus_domain = 'disqus.com';
    var disqus_shortname = 'joelhooks';
    var disqus_title = "An Introduction to Robotlegs AS3 Part 3: Services";
        var disqus_config = function () {
        var config = this; // Access to the config object

        /*
           All currently supported events:
            * preData â€” fires just before we request for initial data
            * preInit - fires after we get initial data but before we load any dependencies
            * onInit  - fires when all dependencies are resolved but before dtpl template is rendered
            * afterRender - fires when template is rendered but before we show it
            * onReady - everything is done
         */

        config.callbacks.preData.push(function() {
            // clear out the container (its filled for SEO/legacy purposes)
            document.getElementById(disqus_container_id).innerHTML = '';
        });
                config.callbacks.onReady.push(function() {
            // sync comments in the background so we don't block the page
            DISQUS.request.get('?cf_action=sync_comments&post_id=600');
        });
                    };
    var facebookXdReceiverPath = 'https://joelhooks.com/wp-content/plugins/disqus-comment-system/xd_receiver.htm';
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
    var DsqLocal = {
        'trackbacks': [
        ],
        'trackback_url': "http:\/\/joelhooks.com\/2011\/03\/12\/an-introduction-to-robotlegs-as3-part-3-services\/trackback\/"    };
/* ]]> */
</script>

<script type="text/javascript">
/* <![CDATA[ */
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = 'https://' + disqus_shortname + '.' + disqus_domain + '/embed.js?pname=wordpress&pver=2.69';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();
/* ]]> */
</script>
		</section><!-- #main -->
                        <blockquote class="style1"><p>This content is archived. I didn't want it to be lost in the ether, so I exported it from wordpress as static files. I also stripped it of the heavy theme as much as possible using the excellent <a href="https://aarontgrogg.com/boilerplate/">Boilerplate</a> theme. </p><p>If this website is useful to you, makes you angry, or otherwise stirs your emotions; I'd love to hear about it. <a href="https://twitter.com/jhooks">@jhooks</a></p></blockquote>
		<!-- footer -->

<!-- tracker added by Ultimate Google Analytics plugin v1.6.0: https://www.oratransplant.nl/uga -->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "https://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-246705-7");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<!-- BEGIN: WP Social Bookmarking Light -->
<!-- END: WP Social Bookmarking Light -->
<!-- Generated in 0.560 seconds. Made 6 queries to database and 13 cached queries. Memory used - 16.26MB -->
<!-- Cached by DB Cache Reloaded Fix -->
	</body>
</html>